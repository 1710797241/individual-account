<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.models.dao.AccountDao">

	<select id="login" parameterType="com.models.entity.Account" resultType="com.models.entity.Account">
	   select u.user_name, account_code ,account_name,account_password,account_email,trade_password,
	    account_balance,account_score,a.user_identity,is_admin
	  from account a,user u
	<where>
	 	a.user_identity = u.user_identity

		and a.delete_status="no"
		<if test="account_name != null and account_name != ''">
			and account_name = #{account_name}
		</if>
		<if test="account_password != null and account_password != ''">
			and account_password = #{account_password}
		</if>
	</where>
	</select>

	<!--修改账户密码-->
	<update id="modifyPass" parameterType="com.models.entity.Account">
		update account
		set account_password = #{account_password}
		where account_code =  #{account_code}
	</update>

	<!--修改交易密码-->
	<update id="modifyTradePass" parameterType="com.models.entity.Account">
		update account
		set trade_password = #{trade_password}
		where account_code =  #{account_code}
	</update>

	<select id="selectBalance" parameterType="java.lang.String" resultType="java.math.BigDecimal">
		select account_balance from account where account_name=#{account_name}
	</select>

</mapper>